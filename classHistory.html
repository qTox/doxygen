<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>qTox: History Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">qTox
   &#160;<span id="projectnumber">Version: nightly | Commit: bc751c8e1cac455f9690654fcfe0f560d2d7dfdd</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#signals">Signals</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-slots">Private Slots</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-static-methods">Static Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classHistory-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">History Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Interacts with the profile database to save the chat history.  
 <a href="classHistory.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="history_8h_source.html">history.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for History:</div>
<div class="dyncontent">
<div class="center"><img src="classHistory__inherit__graph.png" border="0" usemap="#History_inherit__map" alt="Inheritance graph"/></div>
<map name="History_inherit__map" id="History_inherit__map">
<area shape="rect" title="Interacts with the profile database to save the chat history." alt="" coords="5,145,259,457"/>
<area shape="rect" title=" " alt="" coords="23,13,97,90"/>
<area shape="rect" title=" " alt="" coords="121,5,289,97"/>
</map>
</div>
<div class="dynheader">
Collaboration diagram for History:</div>
<div class="dyncontent">
<div class="center"><img src="classHistory__coll__graph.png" border="0" usemap="#History_coll__map" alt="Collaboration graph"/></div>
<map name="History_coll__map" id="History_coll__map">
<area shape="rect" title="Interacts with the profile database to save the chat history." alt="" coords="61,160,315,457"/>
<area shape="rect" title=" " alt="" coords="5,13,80,90"/>
<area shape="rect" title=" " alt="" coords="104,5,272,97"/>
<area shape="rect" href="classQHash.html" title=" " alt="" coords="297,5,479,97"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structHistory_1_1DateIdx.html">DateIdx</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structHistory_1_1FileInfo.html">FileInfo</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structHistory_1_1HistMessage.html">HistMessage</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="signals"></a>
Signals</h2></td></tr>
<tr class="memitem:ac54a82c8983f4d10009537b7a1b5bee7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHistory.html#ac54a82c8983f4d10009537b7a1b5bee7">fileInserted</a> (<a class="el" href="rawdatabase_8h.html#abbeb84b4f2e88670ea185408462d094c">RowId</a> dbId, QString fileId)</td></tr>
<tr class="separator:ac54a82c8983f4d10009537b7a1b5bee7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a1bfb6273a139a659667e2a15407c0304"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHistory.html#a1bfb6273a139a659667e2a15407c0304">History</a> (std::shared_ptr&lt; <a class="el" href="classRawDatabase.html">RawDatabase</a> &gt; <a class="el" href="classHistory.html#a2f7d73854bcdfa71ec36f8e687166b72">db</a>)</td></tr>
<tr class="memdesc:a1bfb6273a139a659667e2a15407c0304"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prepares the database to work with the history.  <a href="classHistory.html#a1bfb6273a139a659667e2a15407c0304">More...</a><br /></td></tr>
<tr class="separator:a1bfb6273a139a659667e2a15407c0304"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b00b64a1ddee04e60d5a3b517fd6d4c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHistory.html#a5b00b64a1ddee04e60d5a3b517fd6d4c">~History</a> ()</td></tr>
<tr class="separator:a5b00b64a1ddee04e60d5a3b517fd6d4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac09cc6497d03c92ba5e1dc13e67d1730"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHistory.html#ac09cc6497d03c92ba5e1dc13e67d1730">isValid</a> ()</td></tr>
<tr class="memdesc:ac09cc6497d03c92ba5e1dc13e67d1730"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if the database was opened successfully.  <a href="classHistory.html#ac09cc6497d03c92ba5e1dc13e67d1730">More...</a><br /></td></tr>
<tr class="separator:ac09cc6497d03c92ba5e1dc13e67d1730"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a857a5a2a080760ae86ecf386a1428c6e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHistory.html#a857a5a2a080760ae86ecf386a1428c6e">historyExists</a> (const <a class="el" href="classToxPk.html">ToxPk</a> &amp;friendPk)</td></tr>
<tr class="memdesc:a857a5a2a080760ae86ecf386a1428c6e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if a friend has chat history.  <a href="classHistory.html#a857a5a2a080760ae86ecf386a1428c6e">More...</a><br /></td></tr>
<tr class="separator:a857a5a2a080760ae86ecf386a1428c6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe01b50ec9f5f68b8cb887da1874f61c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHistory.html#abe01b50ec9f5f68b8cb887da1874f61c">eraseHistory</a> ()</td></tr>
<tr class="memdesc:abe01b50ec9f5f68b8cb887da1874f61c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Erases all the chat history from the database.  <a href="classHistory.html#abe01b50ec9f5f68b8cb887da1874f61c">More...</a><br /></td></tr>
<tr class="separator:abe01b50ec9f5f68b8cb887da1874f61c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e2f0b6c902c27a5101b618956e39023"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHistory.html#a4e2f0b6c902c27a5101b618956e39023">removeFriendHistory</a> (const <a class="el" href="classToxPk.html">ToxPk</a> &amp;friendPk)</td></tr>
<tr class="memdesc:a4e2f0b6c902c27a5101b618956e39023"><td class="mdescLeft">&#160;</td><td class="mdescRight">Erases the chat history with one friend.  <a href="classHistory.html#a4e2f0b6c902c27a5101b618956e39023">More...</a><br /></td></tr>
<tr class="separator:a4e2f0b6c902c27a5101b618956e39023"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abcce3c0e31955b6bf77b8d96a62e5b29"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHistory.html#abcce3c0e31955b6bf77b8d96a62e5b29">addNewMessage</a> (const <a class="el" href="classToxPk.html">ToxPk</a> &amp;friendPk, const QString &amp;<a class="el" href="history_8h.html#a0ee552d065aa1e11e1a4d6da9a79407da78e731027d8fd50ed642340b7c9a63b3">message</a>, const <a class="el" href="classToxPk.html">ToxPk</a> &amp;sender, const QDateTime &amp;time, bool isDelivered, <a class="el" href="extension_8h.html#a7938c358297aa9db8ac6f400a81681aa">ExtensionSet</a> extensions, QString dispName, const std::function&lt; void(<a class="el" href="rawdatabase_8h.html#abbeb84b4f2e88670ea185408462d094c">RowId</a>)&gt; &amp;insertIdCallback={})</td></tr>
<tr class="memdesc:abcce3c0e31955b6bf77b8d96a62e5b29"><td class="mdescLeft">&#160;</td><td class="mdescRight">Saves a chat message in the database.  <a href="classHistory.html#abcce3c0e31955b6bf77b8d96a62e5b29">More...</a><br /></td></tr>
<tr class="separator:abcce3c0e31955b6bf77b8d96a62e5b29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45e92a551ba16cee4704458c16237a97"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHistory.html#a45e92a551ba16cee4704458c16237a97">addNewFileMessage</a> (const <a class="el" href="classToxPk.html">ToxPk</a> &amp;friendPk, const QString &amp;fileId, const QString &amp;fileName, const QString &amp;filePath, int64_t size, const <a class="el" href="classToxPk.html">ToxPk</a> &amp;sender, const QDateTime &amp;time, QString const &amp;dispName)</td></tr>
<tr class="separator:a45e92a551ba16cee4704458c16237a97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a211bf5d2ffa4c1657b4c5f37fcebf510"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHistory.html#a211bf5d2ffa4c1657b4c5f37fcebf510">addNewSystemMessage</a> (const <a class="el" href="classToxPk.html">ToxPk</a> &amp;friendPk, const <a class="el" href="structSystemMessage.html">SystemMessage</a> &amp;systemMessage)</td></tr>
<tr class="separator:a211bf5d2ffa4c1657b4c5f37fcebf510"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74104ef2bbc6d9d387f675aadd8b7fa0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHistory.html#a74104ef2bbc6d9d387f675aadd8b7fa0">setFileFinished</a> (const QString &amp;fileId, bool success, const QString &amp;filePath, const QByteArray &amp;fileHash)</td></tr>
<tr class="separator:a74104ef2bbc6d9d387f675aadd8b7fa0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac44641454765cf9ce2c71ed1e17adccf"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHistory.html#ac44641454765cf9ce2c71ed1e17adccf">getNumMessagesForFriend</a> (const <a class="el" href="classToxPk.html">ToxPk</a> &amp;friendPk)</td></tr>
<tr class="separator:ac44641454765cf9ce2c71ed1e17adccf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a889a688372db3fe48bdb1dc37e8755c2"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHistory.html#a889a688372db3fe48bdb1dc37e8755c2">getNumMessagesForFriendBeforeDate</a> (const <a class="el" href="classToxPk.html">ToxPk</a> &amp;friendPk, const QDateTime &amp;date)</td></tr>
<tr class="separator:a889a688372db3fe48bdb1dc37e8755c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51b715e3544228018a5a035652ae56de"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classQList.html">QList</a>&lt; <a class="el" href="structHistory_1_1HistMessage.html">HistMessage</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHistory.html#a51b715e3544228018a5a035652ae56de">getMessagesForFriend</a> (const <a class="el" href="classToxPk.html">ToxPk</a> &amp;friendPk, size_t firstIdx, size_t lastIdx)</td></tr>
<tr class="separator:a51b715e3544228018a5a035652ae56de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b82aa28959279e829dcd4efb4a27fa8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classQList.html">QList</a>&lt; <a class="el" href="structHistory_1_1HistMessage.html">HistMessage</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHistory.html#a3b82aa28959279e829dcd4efb4a27fa8">getUndeliveredMessagesForFriend</a> (const <a class="el" href="classToxPk.html">ToxPk</a> &amp;friendPk)</td></tr>
<tr class="separator:a3b82aa28959279e829dcd4efb4a27fa8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad104cfe24475f8a6ee23641d8c8fe8ac"><td class="memItemLeft" align="right" valign="top">QDateTime&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHistory.html#ad104cfe24475f8a6ee23641d8c8fe8ac">getDateWhereFindPhrase</a> (const <a class="el" href="classToxPk.html">ToxPk</a> &amp;friendPk, const QDateTime &amp;from, QString phrase, const <a class="el" href="structParameterSearch.html">ParameterSearch</a> &amp;parameter)</td></tr>
<tr class="memdesc:ad104cfe24475f8a6ee23641d8c8fe8ac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Search phrase in chat messages.  <a href="classHistory.html#ad104cfe24475f8a6ee23641d8c8fe8ac">More...</a><br /></td></tr>
<tr class="separator:ad104cfe24475f8a6ee23641d8c8fe8ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a358d34068f7daba96c510e3236a4e004"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classQList.html">QList</a>&lt; <a class="el" href="structHistory_1_1DateIdx.html">DateIdx</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHistory.html#a358d34068f7daba96c510e3236a4e004">getNumMessagesForFriendBeforeDateBoundaries</a> (const <a class="el" href="classToxPk.html">ToxPk</a> &amp;friendPk, const QDate &amp;from, size_t maxNum)</td></tr>
<tr class="memdesc:a358d34068f7daba96c510e3236a4e004"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets date boundaries in conversation with friendPk. <a class="el" href="classHistory.html" title="Interacts with the profile database to save the chat history.">History</a> doesn't model conversation indexes, but we can count messages between us and friendPk to effectively give us an index. This function returns how many messages have happened between us &lt;-&gt; friendPk each time the date changes.  <a href="classHistory.html#a358d34068f7daba96c510e3236a4e004">More...</a><br /></td></tr>
<tr class="separator:a358d34068f7daba96c510e3236a4e004"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08022c9c5a58ddd0ccc7421042ba1e0a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHistory.html#a08022c9c5a58ddd0ccc7421042ba1e0a">markAsDelivered</a> (<a class="el" href="rawdatabase_8h.html#abbeb84b4f2e88670ea185408462d094c">RowId</a> messageId)</td></tr>
<tr class="memdesc:a08022c9c5a58ddd0ccc7421042ba1e0a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Marks a message as delivered. Removing message from the faux-offline pending messages list.  <a href="classHistory.html#a08022c9c5a58ddd0ccc7421042ba1e0a">More...</a><br /></td></tr>
<tr class="separator:a08022c9c5a58ddd0ccc7421042ba1e0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6a540f04cee58bf32f6ac7e3d0dc418"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHistory.html#af6a540f04cee58bf32f6ac7e3d0dc418">markAsBroken</a> (<a class="el" href="rawdatabase_8h.html#abbeb84b4f2e88670ea185408462d094c">RowId</a> messageId, <a class="el" href="brokenmessagereason_8h.html#a5aeb89765ee85523ed7aba8a393f0082">BrokenMessageReason</a> reason)</td></tr>
<tr class="separator:af6a540f04cee58bf32f6ac7e3d0dc418"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-slots"></a>
Private Slots</h2></td></tr>
<tr class="memitem:ac8ffc72bd15c4e3e1068a805a2d4e556"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHistory.html#ac8ffc72bd15c4e3e1068a805a2d4e556">onFileInserted</a> (<a class="el" href="rawdatabase_8h.html#abbeb84b4f2e88670ea185408462d094c">RowId</a> dbId, QString fileId)</td></tr>
<tr class="separator:ac8ffc72bd15c4e3e1068a805a2d4e556"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:abf57c4de4176bb40cd75236de7ca7596"><td class="memItemLeft" align="right" valign="top">QVector&lt; <a class="el" href="classRawDatabase_1_1Query.html">RawDatabase::Query</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHistory.html#abf57c4de4176bb40cd75236de7ca7596">generateNewFileTransferQueries</a> (const <a class="el" href="classToxPk.html">ToxPk</a> &amp;friendPk, const <a class="el" href="classToxPk.html">ToxPk</a> &amp;sender, const QDateTime &amp;time, const QString &amp;dispName, const <a class="el" href="structFileDbInsertionData.html">FileDbInsertionData</a> &amp;insertionData)</td></tr>
<tr class="separator:abf57c4de4176bb40cd75236de7ca7596"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62105626e8e77040b7f51d98458de193"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHistory.html#a62105626e8e77040b7f51d98458de193">historyAccessBlocked</a> ()</td></tr>
<tr class="memdesc:a62105626e8e77040b7f51d98458de193"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determines if history access should be blocked.  <a href="classHistory.html#a62105626e8e77040b7f51d98458de193">More...</a><br /></td></tr>
<tr class="separator:a62105626e8e77040b7f51d98458de193"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0262dc128579340714300871fe180d3c"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHistory.html#a0262dc128579340714300871fe180d3c">getPeerId</a> (<a class="el" href="classToxPk.html">ToxPk</a> const &amp;pk)</td></tr>
<tr class="separator:a0262dc128579340714300871fe180d3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-methods"></a>
Static Private Member Functions</h2></td></tr>
<tr class="memitem:a94fcde3743ad2f5690bc65d9694486b3"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classRawDatabase_1_1Query.html">RawDatabase::Query</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHistory.html#a94fcde3743ad2f5690bc65d9694486b3">generateFileFinished</a> (<a class="el" href="rawdatabase_8h.html#abbeb84b4f2e88670ea185408462d094c">RowId</a> fileId, bool success, const QString &amp;filePath, const QByteArray &amp;fileHash)</td></tr>
<tr class="separator:a94fcde3743ad2f5690bc65d9694486b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a2f7d73854bcdfa71ec36f8e687166b72"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="classRawDatabase.html">RawDatabase</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHistory.html#a2f7d73854bcdfa71ec36f8e687166b72">db</a></td></tr>
<tr class="separator:a2f7d73854bcdfa71ec36f8e687166b72"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abcc4feaecbb4401c4fe7bbba72ac6bb0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classQHash.html">QHash</a>&lt; QString, <a class="el" href="structHistory_1_1FileInfo.html">FileInfo</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHistory.html#abcc4feaecbb4401c4fe7bbba72ac6bb0">fileInfos</a></td></tr>
<tr class="separator:abcc4feaecbb4401c4fe7bbba72ac6bb0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Interacts with the profile database to save the chat history. </p>

<p class="definition">Definition at line <a class="el" href="history_8h_source.html#l00135">135</a> of file <a class="el" href="history_8h_source.html">history.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a1bfb6273a139a659667e2a15407c0304"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1bfb6273a139a659667e2a15407c0304">&#9670;&nbsp;</a></span>History()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">History::History </td>
          <td>(</td>
          <td class="paramtype">std::shared_ptr&lt; <a class="el" href="classRawDatabase.html">RawDatabase</a> &gt;&#160;</td>
          <td class="paramname"><em>db_</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Prepares the database to work with the history. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">db</td><td>This database will be prepared for use with the history. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="history_8cpp_source.html#l00710">710</a> of file <a class="el" href="history_8cpp_source.html">history.cpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classHistory_a1bfb6273a139a659667e2a15407c0304_cgraph.png" border="0" usemap="#classHistory_a1bfb6273a139a659667e2a15407c0304_cgraph" alt=""/></div>
<map name="classHistory_a1bfb6273a139a659667e2a15407c0304_cgraph" id="classHistory_a1bfb6273a139a659667e2a15407c0304_cgraph">
<area shape="rect" title="Prepares the database to work with the history." alt="" coords="5,31,128,57"/>
<area shape="rect" href="classHistory.html#ac09cc6497d03c92ba5e1dc13e67d1730" title="Checks if the database was opened successfully." alt="" coords="201,5,319,32"/>
<area shape="rect" href="classHistory.html#ac8ffc72bd15c4e3e1068a805a2d4e556" title=" " alt="" coords="176,56,344,83"/>
<area shape="rect" href="classHistory.html#a94fcde3743ad2f5690bc65d9694486b3" title=" " alt="" coords="392,56,603,83"/>
</map>
</div>

</div>
</div>
<a id="a5b00b64a1ddee04e60d5a3b517fd6d4c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b00b64a1ddee04e60d5a3b517fd6d4c">&#9670;&nbsp;</a></span>~History()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">History::~History </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="history_8cpp_source.html#l00734">734</a> of file <a class="el" href="history_8cpp_source.html">history.cpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classHistory_a5b00b64a1ddee04e60d5a3b517fd6d4c_cgraph.png" border="0" usemap="#classHistory_a5b00b64a1ddee04e60d5a3b517fd6d4c_cgraph" alt=""/></div>
<map name="classHistory_a5b00b64a1ddee04e60d5a3b517fd6d4c_cgraph" id="classHistory_a5b00b64a1ddee04e60d5a3b517fd6d4c_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,140,32"/>
<area shape="rect" href="classHistory.html#ac09cc6497d03c92ba5e1dc13e67d1730" title="Checks if the database was opened successfully." alt="" coords="188,5,307,32"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a45e92a551ba16cee4704458c16237a97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45e92a551ba16cee4704458c16237a97">&#9670;&nbsp;</a></span>addNewFileMessage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void History::addNewFileMessage </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classToxPk.html">ToxPk</a> &amp;&#160;</td>
          <td class="paramname"><em>friendPk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>fileId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>fileName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>filePath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classToxPk.html">ToxPk</a> &amp;&#160;</td>
          <td class="paramname"><em>sender</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QDateTime &amp;&#160;</td>
          <td class="paramname"><em>time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">QString const &amp;&#160;</td>
          <td class="paramname"><em>dispName</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="history_8cpp_source.html#l00915">915</a> of file <a class="el" href="history_8cpp_source.html">history.cpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classHistory_a45e92a551ba16cee4704458c16237a97_cgraph.png" border="0" usemap="#classHistory_a45e92a551ba16cee4704458c16237a97_cgraph" alt=""/></div>
<map name="classHistory_a45e92a551ba16cee4704458c16237a97_cgraph" id="classHistory_a45e92a551ba16cee4704458c16237a97_cgraph">
<area shape="rect" title=" " alt="" coords="5,42,216,69"/>
<area shape="rect" href="classHistory.html#abf57c4de4176bb40cd75236de7ca7596" title=" " alt="" coords="279,5,466,47"/>
<area shape="rect" href="classHistory.html#a62105626e8e77040b7f51d98458de193" title="Determines if history access should be blocked." alt="" coords="264,71,481,98"/>
<area shape="rect" href="classSettings.html#a754f11e4d7d7e9e12b5c411b42dae0fb" title="Returns the singleton instance." alt="" coords="529,46,688,73"/>
<area shape="rect" href="classHistory.html#ac09cc6497d03c92ba5e1dc13e67d1730" title="Checks if the database was opened successfully." alt="" coords="549,97,668,123"/>
<area shape="rect" href="classSettings.html#ab7169a6eefce79566dd07db3b1e5e967" title=" " alt="" coords="736,46,872,73"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classHistory_a45e92a551ba16cee4704458c16237a97_icgraph.png" border="0" usemap="#classHistory_a45e92a551ba16cee4704458c16237a97_icgraph" alt=""/></div>
<map name="classHistory_a45e92a551ba16cee4704458c16237a97_icgraph" id="classHistory_a45e92a551ba16cee4704458c16237a97_icgraph">
<area shape="rect" title=" " alt="" coords="253,5,464,32"/>
<area shape="rect" href="classChatHistory.html#a46049bd99919563e0b5dd16fe90f7d74" title=" " alt="" coords="5,5,205,32"/>
</map>
</div>

</div>
</div>
<a id="abcce3c0e31955b6bf77b8d96a62e5b29"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abcce3c0e31955b6bf77b8d96a62e5b29">&#9670;&nbsp;</a></span>addNewMessage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void History::addNewMessage </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classToxPk.html">ToxPk</a> &amp;&#160;</td>
          <td class="paramname"><em>friendPk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>message</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classToxPk.html">ToxPk</a> &amp;&#160;</td>
          <td class="paramname"><em>sender</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QDateTime &amp;&#160;</td>
          <td class="paramname"><em>time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>isDelivered</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="extension_8h.html#a7938c358297aa9db8ac6f400a81681aa">ExtensionSet</a>&#160;</td>
          <td class="paramname"><em>extensionSet</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">QString&#160;</td>
          <td class="paramname"><em>dispName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::function&lt; void(<a class="el" href="rawdatabase_8h.html#abbeb84b4f2e88670ea185408462d094c">RowId</a>)&gt; &amp;&#160;</td>
          <td class="paramname"><em>insertIdCallback</em> = <code>{}</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Saves a chat message in the database. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">friendPk</td><td><a class="el" href="classFriend.html">Friend</a> publick key to save. </td></tr>
    <tr><td class="paramname">message</td><td><a class="el" href="structMessage.html">Message</a> to save. </td></tr>
    <tr><td class="paramname">sender</td><td>Sender to save. </td></tr>
    <tr><td class="paramname">time</td><td>Time of message sending. </td></tr>
    <tr><td class="paramname">isDelivered</td><td>True if message was already delivered. </td></tr>
    <tr><td class="paramname">dispName</td><td>Name, which should be displayed. </td></tr>
    <tr><td class="paramname">insertIdCallback</td><td>Function, called after query execution. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="history_8cpp_source.html#l00977">977</a> of file <a class="el" href="history_8cpp_source.html">history.cpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classHistory_abcce3c0e31955b6bf77b8d96a62e5b29_cgraph.png" border="0" usemap="#classHistory_abcce3c0e31955b6bf77b8d96a62e5b29_cgraph" alt=""/></div>
<map name="classHistory_abcce3c0e31955b6bf77b8d96a62e5b29_cgraph" id="classHistory_abcce3c0e31955b6bf77b8d96a62e5b29_cgraph">
<area shape="rect" title="Saves a chat message in the database." alt="" coords="5,31,192,57"/>
<area shape="rect" href="classHistory.html#a62105626e8e77040b7f51d98458de193" title="Determines if history access should be blocked." alt="" coords="240,31,457,57"/>
<area shape="rect" href="classSettings.html#a754f11e4d7d7e9e12b5c411b42dae0fb" title="Returns the singleton instance." alt="" coords="505,5,664,32"/>
<area shape="rect" href="classHistory.html#ac09cc6497d03c92ba5e1dc13e67d1730" title="Checks if the database was opened successfully." alt="" coords="525,56,644,83"/>
<area shape="rect" href="classSettings.html#ab7169a6eefce79566dd07db3b1e5e967" title=" " alt="" coords="712,5,848,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classHistory_abcce3c0e31955b6bf77b8d96a62e5b29_icgraph.png" border="0" usemap="#classHistory_abcce3c0e31955b6bf77b8d96a62e5b29_icgraph" alt=""/></div>
<map name="classHistory_abcce3c0e31955b6bf77b8d96a62e5b29_icgraph" id="classHistory_abcce3c0e31955b6bf77b8d96a62e5b29_icgraph">
<area shape="rect" title="Saves a chat message in the database." alt="" coords="524,31,711,57"/>
<area shape="rect" href="classChatHistory.html#addb5c44ae1d6e70549875bcb6636d69b" title=" " alt="" coords="236,5,476,32"/>
<area shape="rect" href="classChatHistory.html#a8c1fc9d72feb0b27fcf44f8d4fc68036" title=" " alt="" coords="251,56,461,83"/>
<area shape="rect" href="classChatHistory.html#a4af83d592f2eaee02a8316c3393a8d52" title=" " alt="" coords="5,31,188,57"/>
</map>
</div>

</div>
</div>
<a id="a211bf5d2ffa4c1657b4c5f37fcebf510"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a211bf5d2ffa4c1657b4c5f37fcebf510">&#9670;&nbsp;</a></span>addNewSystemMessage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void History::addNewSystemMessage </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classToxPk.html">ToxPk</a> &amp;&#160;</td>
          <td class="paramname"><em>friendPk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structSystemMessage.html">SystemMessage</a> &amp;&#160;</td>
          <td class="paramname"><em>systemMessage</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="history_8cpp_source.html#l00957">957</a> of file <a class="el" href="history_8cpp_source.html">history.cpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classHistory_a211bf5d2ffa4c1657b4c5f37fcebf510_cgraph.png" border="0" usemap="#classHistory_a211bf5d2ffa4c1657b4c5f37fcebf510_cgraph" alt=""/></div>
<map name="classHistory_a211bf5d2ffa4c1657b4c5f37fcebf510_cgraph" id="classHistory_a211bf5d2ffa4c1657b4c5f37fcebf510_cgraph">
<area shape="rect" title=" " alt="" coords="5,31,241,57"/>
<area shape="rect" href="classHistory.html#a62105626e8e77040b7f51d98458de193" title="Determines if history access should be blocked." alt="" coords="289,31,507,57"/>
<area shape="rect" href="classSettings.html#a754f11e4d7d7e9e12b5c411b42dae0fb" title="Returns the singleton instance." alt="" coords="555,5,713,32"/>
<area shape="rect" href="classHistory.html#ac09cc6497d03c92ba5e1dc13e67d1730" title="Checks if the database was opened successfully." alt="" coords="575,56,693,83"/>
<area shape="rect" href="classSettings.html#ab7169a6eefce79566dd07db3b1e5e967" title=" " alt="" coords="761,5,897,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classHistory_a211bf5d2ffa4c1657b4c5f37fcebf510_icgraph.png" border="0" usemap="#classHistory_a211bf5d2ffa4c1657b4c5f37fcebf510_icgraph" alt=""/></div>
<map name="classHistory_a211bf5d2ffa4c1657b4c5f37fcebf510_icgraph" id="classHistory_a211bf5d2ffa4c1657b4c5f37fcebf510_icgraph">
<area shape="rect" title=" " alt="" coords="291,5,527,32"/>
<area shape="rect" href="classChatHistory.html#a3fb366a4aa06e95f9fa72d592076934a" title="Inserts a system message at the end of the chat." alt="" coords="5,5,243,32"/>
</map>
</div>

</div>
</div>
<a id="abe01b50ec9f5f68b8cb887da1874f61c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe01b50ec9f5f68b8cb887da1874f61c">&#9670;&nbsp;</a></span>eraseHistory()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void History::eraseHistory </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Erases all the chat history from the database. </p>

<p class="definition">Definition at line <a class="el" href="history_8cpp_source.html#l00771">771</a> of file <a class="el" href="history_8cpp_source.html">history.cpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classHistory_abe01b50ec9f5f68b8cb887da1874f61c_cgraph.png" border="0" usemap="#classHistory_abe01b50ec9f5f68b8cb887da1874f61c_cgraph" alt=""/></div>
<map name="classHistory_abe01b50ec9f5f68b8cb887da1874f61c_cgraph" id="classHistory_abe01b50ec9f5f68b8cb887da1874f61c_cgraph">
<area shape="rect" title="Erases all the chat history from the database." alt="" coords="5,5,164,32"/>
<area shape="rect" href="classHistory.html#ac09cc6497d03c92ba5e1dc13e67d1730" title="Checks if the database was opened successfully." alt="" coords="212,5,331,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classHistory_abe01b50ec9f5f68b8cb887da1874f61c_icgraph.png" border="0" usemap="#classHistory_abe01b50ec9f5f68b8cb887da1874f61c_icgraph" alt=""/></div>
<map name="classHistory_abe01b50ec9f5f68b8cb887da1874f61c_icgraph" id="classHistory_abe01b50ec9f5f68b8cb887da1874f61c_icgraph">
<area shape="rect" title="Erases all the chat history from the database." alt="" coords="281,13,440,39"/>
<area shape="rect" href="classPrivacyForm.html#a460c853b8107d52c39d8702ebfd652b1" title=" " alt="" coords="5,5,233,47"/>
</map>
</div>

</div>
</div>
<a id="ac54a82c8983f4d10009537b7a1b5bee7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac54a82c8983f4d10009537b7a1b5bee7">&#9670;&nbsp;</a></span>fileInserted</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void History::fileInserted </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="rawdatabase_8h.html#abbeb84b4f2e88670ea185408462d094c">RowId</a>&#160;</td>
          <td class="paramname"><em>dbId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">QString&#160;</td>
          <td class="paramname"><em>fileId</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">signal</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classHistory_ac54a82c8983f4d10009537b7a1b5bee7_icgraph.png" border="0" usemap="#classHistory_ac54a82c8983f4d10009537b7a1b5bee7_icgraph" alt=""/></div>
<map name="classHistory_ac54a82c8983f4d10009537b7a1b5bee7_icgraph" id="classHistory_ac54a82c8983f4d10009537b7a1b5bee7_icgraph">
<area shape="rect" title=" " alt="" coords="176,5,325,32"/>
<area shape="rect" href="classHistory.html#a1bfb6273a139a659667e2a15407c0304" title="Prepares the database to work with the history." alt="" coords="5,5,128,32"/>
</map>
</div>

</div>
</div>
<a id="a94fcde3743ad2f5690bc65d9694486b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a94fcde3743ad2f5690bc65d9694486b3">&#9670;&nbsp;</a></span>generateFileFinished()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classRawDatabase_1_1Query.html">RawDatabase::Query</a> History::generateFileFinished </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="rawdatabase_8h.html#abbeb84b4f2e88670ea185408462d094c">RowId</a>&#160;</td>
          <td class="paramname"><em>fileId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>success</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>filePath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QByteArray &amp;&#160;</td>
          <td class="paramname"><em>fileHash</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="history_8cpp_source.html#l00895">895</a> of file <a class="el" href="history_8cpp_source.html">history.cpp</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classHistory_a94fcde3743ad2f5690bc65d9694486b3_icgraph.png" border="0" usemap="#classHistory_a94fcde3743ad2f5690bc65d9694486b3_icgraph" alt=""/></div>
<map name="classHistory_a94fcde3743ad2f5690bc65d9694486b3_icgraph" id="classHistory_a94fcde3743ad2f5690bc65d9694486b3_icgraph">
<area shape="rect" title=" " alt="" coords="475,31,685,57"/>
<area shape="rect" href="classHistory.html#ac8ffc72bd15c4e3e1068a805a2d4e556" title=" " alt="" coords="256,5,424,32"/>
<area shape="rect" href="classHistory.html#a74104ef2bbc6d9d387f675aadd8b7fa0" title=" " alt="" coords="253,56,427,83"/>
<area shape="rect" href="classHistory.html#a1bfb6273a139a659667e2a15407c0304" title="Prepares the database to work with the history." alt="" coords="44,5,167,32"/>
<area shape="rect" href="classChatHistory.html#a46049bd99919563e0b5dd16fe90f7d74" title=" " alt="" coords="5,56,205,83"/>
</map>
</div>

</div>
</div>
<a id="abf57c4de4176bb40cd75236de7ca7596"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf57c4de4176bb40cd75236de7ca7596">&#9670;&nbsp;</a></span>generateNewFileTransferQueries()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">QVector&lt; <a class="el" href="classRawDatabase_1_1Query.html">RawDatabase::Query</a> &gt; History::generateNewFileTransferQueries </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classToxPk.html">ToxPk</a> &amp;&#160;</td>
          <td class="paramname"><em>friendPk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classToxPk.html">ToxPk</a> &amp;&#160;</td>
          <td class="paramname"><em>sender</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QDateTime &amp;&#160;</td>
          <td class="paramname"><em>time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>dispName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structFileDbInsertionData.html">FileDbInsertionData</a> &amp;&#160;</td>
          <td class="paramname"><em>insertionData</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="history_8cpp_source.html#l00847">847</a> of file <a class="el" href="history_8cpp_source.html">history.cpp</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classHistory_abf57c4de4176bb40cd75236de7ca7596_icgraph.png" border="0" usemap="#classHistory_abf57c4de4176bb40cd75236de7ca7596_icgraph" alt=""/></div>
<map name="classHistory_abf57c4de4176bb40cd75236de7ca7596_icgraph" id="classHistory_abf57c4de4176bb40cd75236de7ca7596_icgraph">
<area shape="rect" title=" " alt="" coords="512,5,699,47"/>
<area shape="rect" href="classHistory.html#a45e92a551ba16cee4704458c16237a97" title=" " alt="" coords="253,13,464,39"/>
<area shape="rect" href="classChatHistory.html#a46049bd99919563e0b5dd16fe90f7d74" title=" " alt="" coords="5,13,205,39"/>
</map>
</div>

</div>
</div>
<a id="ad104cfe24475f8a6ee23641d8c8fe8ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad104cfe24475f8a6ee23641d8c8fe8ac">&#9670;&nbsp;</a></span>getDateWhereFindPhrase()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QDateTime History::getDateWhereFindPhrase </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classToxPk.html">ToxPk</a> &amp;&#160;</td>
          <td class="paramname"><em>friendPk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QDateTime &amp;&#160;</td>
          <td class="paramname"><em>from</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">QString&#160;</td>
          <td class="paramname"><em>phrase</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structParameterSearch.html">ParameterSearch</a> &amp;&#160;</td>
          <td class="paramname"><em>parameter</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Search phrase in chat messages. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">friendPk</td><td><a class="el" href="classFriend.html">Friend</a> public key </td></tr>
    <tr><td class="paramname">from</td><td>a date message where need to start a search </td></tr>
    <tr><td class="paramname">phrase</td><td>what need to find </td></tr>
    <tr><td class="paramname">parameter</td><td>for search </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>date of the message where the phrase was found </dd></dl>

<p class="definition">Definition at line <a class="el" href="history_8cpp_source.html#l01211">1211</a> of file <a class="el" href="history_8cpp_source.html">history.cpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classHistory_ad104cfe24475f8a6ee23641d8c8fe8ac_cgraph.png" border="0" usemap="#classHistory_ad104cfe24475f8a6ee23641d8c8fe8ac_cgraph" alt=""/></div>
<map name="classHistory_ad104cfe24475f8a6ee23641d8c8fe8ac_cgraph" id="classHistory_ad104cfe24475f8a6ee23641d8c8fe8ac_cgraph">
<area shape="rect" title="Search phrase in chat messages." alt="" coords="5,64,203,105"/>
<area shape="rect" href="classSearchExtraFunctions.html#a06367df4f33e128f30923230850a69b5" title="generateFilterWordsOnly generate string for filter &quot;Whole words only&quot; for correct search phrase conta..." alt="" coords="264,5,455,47"/>
<area shape="rect" href="classHistory.html#a62105626e8e77040b7f51d98458de193" title="Determines if history access should be blocked." alt="" coords="251,71,468,98"/>
<area shape="rect" href="classContactId.html#ac7917798235c68c6112e9089ca05da27" title="Converts the ContactId to a uppercase hex string." alt="" coords="288,122,431,149"/>
<area shape="rect" href="classSettings.html#a754f11e4d7d7e9e12b5c411b42dae0fb" title="Returns the singleton instance." alt="" coords="516,46,675,73"/>
<area shape="rect" href="classHistory.html#ac09cc6497d03c92ba5e1dc13e67d1730" title="Checks if the database was opened successfully." alt="" coords="536,97,655,123"/>
<area shape="rect" href="classSettings.html#ab7169a6eefce79566dd07db3b1e5e967" title=" " alt="" coords="723,46,859,73"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classHistory_ad104cfe24475f8a6ee23641d8c8fe8ac_icgraph.png" border="0" usemap="#classHistory_ad104cfe24475f8a6ee23641d8c8fe8ac_icgraph" alt=""/></div>
<map name="classHistory_ad104cfe24475f8a6ee23641d8c8fe8ac_icgraph" id="classHistory_ad104cfe24475f8a6ee23641d8c8fe8ac_icgraph">
<area shape="rect" title="Search phrase in chat messages." alt="" coords="267,5,464,47"/>
<area shape="rect" href="classChatHistory.html#ab3ea46732b21c61aaaaf7147ec2e1d12" title="searches backwards through the chat log until phrase is found according to parameter" alt="" coords="5,13,219,39"/>
</map>
</div>

</div>
</div>
<a id="a51b715e3544228018a5a035652ae56de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a51b715e3544228018a5a035652ae56de">&#9670;&nbsp;</a></span>getMessagesForFriend()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classQList.html">QList</a>&lt; <a class="el" href="structHistory_1_1HistMessage.html">History::HistMessage</a> &gt; History::getMessagesForFriend </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classToxPk.html">ToxPk</a> &amp;&#160;</td>
          <td class="paramname"><em>friendPk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>firstIdx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>lastIdx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="history_8cpp_source.html#l01046">1046</a> of file <a class="el" href="history_8cpp_source.html">history.cpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classHistory_a51b715e3544228018a5a035652ae56de_cgraph.png" border="0" usemap="#classHistory_a51b715e3544228018a5a035652ae56de_cgraph" alt=""/></div>
<map name="classHistory_a51b715e3544228018a5a035652ae56de_cgraph" id="classHistory_a51b715e3544228018a5a035652ae56de_cgraph">
<area shape="rect" title=" " alt="" coords="5,56,228,83"/>
<area shape="rect" href="classHistory.html#a62105626e8e77040b7f51d98458de193" title="Determines if history access should be blocked." alt="" coords="276,31,493,57"/>
<area shape="rect" href="classContactId.html#ac7917798235c68c6112e9089ca05da27" title="Converts the ContactId to a uppercase hex string." alt="" coords="313,81,456,108"/>
<area shape="rect" href="classSettings.html#a754f11e4d7d7e9e12b5c411b42dae0fb" title="Returns the singleton instance." alt="" coords="541,5,700,32"/>
<area shape="rect" href="classHistory.html#ac09cc6497d03c92ba5e1dc13e67d1730" title="Checks if the database was opened successfully." alt="" coords="561,56,680,83"/>
<area shape="rect" href="classSettings.html#ab7169a6eefce79566dd07db3b1e5e967" title=" " alt="" coords="748,5,884,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classHistory_a51b715e3544228018a5a035652ae56de_icgraph.png" border="0" usemap="#classHistory_a51b715e3544228018a5a035652ae56de_icgraph" alt=""/></div>
<map name="classHistory_a51b715e3544228018a5a035652ae56de_icgraph" id="classHistory_a51b715e3544228018a5a035652ae56de_icgraph">
<area shape="rect" title=" " alt="" coords="761,60,984,87"/>
<area shape="rect" href="classHistory.html#a857a5a2a080760ae86ecf386a1428c6e" title="Checks if a friend has chat history." alt="" coords="543,19,703,45"/>
<area shape="rect" href="classChatHistory.html#a385c0861dc9410fcf18684d8fe8fc019" title="Unconditionally loads the given index and all future messages that are not in the session chat log in..." alt="" coords="532,82,713,123"/>
<area shape="rect" href="classAboutFriend.html#a0d170f4e26de5f7af1fbfa2eb4f164da" title=" " alt="" coords="255,5,484,32"/>
<area shape="rect" href="classChatHistory.html#a4af83d592f2eaee02a8316c3393a8d52" title=" " alt="" coords="278,56,461,83"/>
<area shape="rect" href="classChatHistory.html#a344eb9def397254e0345c21e6bbf7ad4" title="Forces the given index and all future indexes to be in the chatlog." alt="" coords="278,107,461,149"/>
<area shape="rect" href="classChatHistory.html#ab3ea46732b21c61aaaaf7147ec2e1d12" title="searches backwards through the chat log until phrase is found according to parameter" alt="" coords="263,173,476,200"/>
<area shape="rect" href="classChatHistory.html#a47c4d731377614a72939cf9aa6925ca9" title="Returns reference to item at idx." alt="" coords="47,89,165,116"/>
<area shape="rect" href="classChatHistory.html#ab2719a6a9cfa86eaa1907e4ee9d64674" title="searches forwards through the chat log until phrase is found according to parameter" alt="" coords="5,140,207,167"/>
</map>
</div>

</div>
</div>
<a id="ac44641454765cf9ce2c71ed1e17adccf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac44641454765cf9ce2c71ed1e17adccf">&#9670;&nbsp;</a></span>getNumMessagesForFriend()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t History::getNumMessagesForFriend </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classToxPk.html">ToxPk</a> &amp;&#160;</td>
          <td class="paramname"><em>friendPk</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="history_8cpp_source.html#l01009">1009</a> of file <a class="el" href="history_8cpp_source.html">history.cpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classHistory_ac44641454765cf9ce2c71ed1e17adccf_cgraph.png" border="0" usemap="#classHistory_ac44641454765cf9ce2c71ed1e17adccf_cgraph" alt=""/></div>
<map name="classHistory_ac44641454765cf9ce2c71ed1e17adccf_cgraph" id="classHistory_ac44641454765cf9ce2c71ed1e17adccf_cgraph">
<area shape="rect" title=" " alt="" coords="5,49,219,90"/>
<area shape="rect" href="classHistory.html#a889a688372db3fe48bdb1dc37e8755c2" title=" " alt="" coords="267,78,480,119"/>
<area shape="rect" href="classHistory.html#a62105626e8e77040b7f51d98458de193" title="Determines if history access should be blocked." alt="" coords="528,31,745,57"/>
<area shape="rect" href="classContactId.html#ac7917798235c68c6112e9089ca05da27" title="Converts the ContactId to a uppercase hex string." alt="" coords="565,85,708,112"/>
<area shape="rect" href="classSettings.html#a754f11e4d7d7e9e12b5c411b42dae0fb" title="Returns the singleton instance." alt="" coords="793,5,952,32"/>
<area shape="rect" href="classHistory.html#ac09cc6497d03c92ba5e1dc13e67d1730" title="Checks if the database was opened successfully." alt="" coords="813,56,932,83"/>
<area shape="rect" href="classSettings.html#ab7169a6eefce79566dd07db3b1e5e967" title=" " alt="" coords="1000,5,1136,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classHistory_ac44641454765cf9ce2c71ed1e17adccf_icgraph.png" border="0" usemap="#classHistory_ac44641454765cf9ce2c71ed1e17adccf_icgraph" alt=""/></div>
<map name="classHistory_ac44641454765cf9ce2c71ed1e17adccf_icgraph" id="classHistory_ac44641454765cf9ce2c71ed1e17adccf_icgraph">
<area shape="rect" title=" " alt="" coords="248,5,461,47"/>
<area shape="rect" href="classChatHistory.html#a5e98010471983b9890f7ef673b1e1bef" title="Gets the initial chat log index for a sessionChatLog with 0 items loaded from history...." alt="" coords="5,5,200,47"/>
</map>
</div>

</div>
</div>
<a id="a889a688372db3fe48bdb1dc37e8755c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a889a688372db3fe48bdb1dc37e8755c2">&#9670;&nbsp;</a></span>getNumMessagesForFriendBeforeDate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t History::getNumMessagesForFriendBeforeDate </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classToxPk.html">ToxPk</a> &amp;&#160;</td>
          <td class="paramname"><em>friendPk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QDateTime &amp;&#160;</td>
          <td class="paramname"><em>date</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="history_8cpp_source.html#l01018">1018</a> of file <a class="el" href="history_8cpp_source.html">history.cpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classHistory_a889a688372db3fe48bdb1dc37e8755c2_cgraph.png" border="0" usemap="#classHistory_a889a688372db3fe48bdb1dc37e8755c2_cgraph" alt=""/></div>
<map name="classHistory_a889a688372db3fe48bdb1dc37e8755c2_cgraph" id="classHistory_a889a688372db3fe48bdb1dc37e8755c2_cgraph">
<area shape="rect" title=" " alt="" coords="5,49,219,90"/>
<area shape="rect" href="classHistory.html#a62105626e8e77040b7f51d98458de193" title="Determines if history access should be blocked." alt="" coords="267,31,484,57"/>
<area shape="rect" href="classContactId.html#ac7917798235c68c6112e9089ca05da27" title="Converts the ContactId to a uppercase hex string." alt="" coords="304,81,447,108"/>
<area shape="rect" href="classSettings.html#a754f11e4d7d7e9e12b5c411b42dae0fb" title="Returns the singleton instance." alt="" coords="532,5,691,32"/>
<area shape="rect" href="classHistory.html#ac09cc6497d03c92ba5e1dc13e67d1730" title="Checks if the database was opened successfully." alt="" coords="552,56,671,83"/>
<area shape="rect" href="classSettings.html#ab7169a6eefce79566dd07db3b1e5e967" title=" " alt="" coords="739,5,875,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classHistory_a889a688372db3fe48bdb1dc37e8755c2_icgraph.png" border="0" usemap="#classHistory_a889a688372db3fe48bdb1dc37e8755c2_icgraph" alt=""/></div>
<map name="classHistory_a889a688372db3fe48bdb1dc37e8755c2_icgraph" id="classHistory_a889a688372db3fe48bdb1dc37e8755c2_icgraph">
<area shape="rect" title=" " alt="" coords="509,35,723,76"/>
<area shape="rect" href="classHistory.html#ac44641454765cf9ce2c71ed1e17adccf" title=" " alt="" coords="248,5,461,47"/>
<area shape="rect" href="classChatHistory.html#ab3ea46732b21c61aaaaf7147ec2e1d12" title="searches backwards through the chat log until phrase is found according to parameter" alt="" coords="248,71,461,98"/>
<area shape="rect" href="classChatHistory.html#a5e98010471983b9890f7ef673b1e1bef" title="Gets the initial chat log index for a sessionChatLog with 0 items loaded from history...." alt="" coords="5,5,200,47"/>
</map>
</div>

</div>
</div>
<a id="a358d34068f7daba96c510e3236a4e004"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a358d34068f7daba96c510e3236a4e004">&#9670;&nbsp;</a></span>getNumMessagesForFriendBeforeDateBoundaries()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classQList.html">QList</a>&lt; <a class="el" href="structHistory_1_1DateIdx.html">History::DateIdx</a> &gt; History::getNumMessagesForFriendBeforeDateBoundaries </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classToxPk.html">ToxPk</a> &amp;&#160;</td>
          <td class="paramname"><em>friendPk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QDate &amp;&#160;</td>
          <td class="paramname"><em>from</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>maxNum</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets date boundaries in conversation with friendPk. <a class="el" href="classHistory.html" title="Interacts with the profile database to save the chat history.">History</a> doesn't model conversation indexes, but we can count messages between us and friendPk to effectively give us an index. This function returns how many messages have happened between us &lt;-&gt; friendPk each time the date changes. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">friendPk</td><td><a class="el" href="classToxPk.html" title="This class represents a Tox Public Key, which is a part of Tox ID.">ToxPk</a> of conversation to retrieve </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">from</td><td>Start date to look from </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">maxNum</td><td>Maximum number of date boundaries to retrieve </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This API may seem a little strange, why not use QDate from and QDate to? The intent is to have an API that can be used to get the first item after a date (for search) and to get a list of date changes (for loadHistory). We could write two separate queries but the query is fairly intricate compared to our other ones so reducing duplication of it is preferable. </dd></dl>

<p class="definition">Definition at line <a class="el" href="history_8cpp_source.html#l01313">1313</a> of file <a class="el" href="history_8cpp_source.html">history.cpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classHistory_a358d34068f7daba96c510e3236a4e004_cgraph.png" border="0" usemap="#classHistory_a358d34068f7daba96c510e3236a4e004_cgraph" alt=""/></div>
<map name="classHistory_a358d34068f7daba96c510e3236a4e004_cgraph" id="classHistory_a358d34068f7daba96c510e3236a4e004_cgraph">
<area shape="rect" title="Gets date boundaries in conversation with friendPk. History doesn&#39;t model conversation indexes,..." alt="" coords="5,49,219,90"/>
<area shape="rect" href="classHistory.html#a62105626e8e77040b7f51d98458de193" title="Determines if history access should be blocked." alt="" coords="267,31,484,57"/>
<area shape="rect" href="classContactId.html#ac7917798235c68c6112e9089ca05da27" title="Converts the ContactId to a uppercase hex string." alt="" coords="304,81,447,108"/>
<area shape="rect" href="classSettings.html#a754f11e4d7d7e9e12b5c411b42dae0fb" title="Returns the singleton instance." alt="" coords="532,5,691,32"/>
<area shape="rect" href="classHistory.html#ac09cc6497d03c92ba5e1dc13e67d1730" title="Checks if the database was opened successfully." alt="" coords="552,56,671,83"/>
<area shape="rect" href="classSettings.html#ab7169a6eefce79566dd07db3b1e5e967" title=" " alt="" coords="739,5,875,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classHistory_a358d34068f7daba96c510e3236a4e004_icgraph.png" border="0" usemap="#classHistory_a358d34068f7daba96c510e3236a4e004_icgraph" alt=""/></div>
<map name="classHistory_a358d34068f7daba96c510e3236a4e004_icgraph" id="classHistory_a358d34068f7daba96c510e3236a4e004_icgraph">
<area shape="rect" title="Gets date boundaries in conversation with friendPk. History doesn&#39;t model conversation indexes,..." alt="" coords="239,5,452,47"/>
<area shape="rect" href="classChatHistory.html#a7281d4a0fe8b2cbb4c7e973cf6550491" title="Gets indexes for each new date starting at startDate." alt="" coords="5,13,191,39"/>
</map>
</div>

</div>
</div>
<a id="a0262dc128579340714300871fe180d3c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0262dc128579340714300871fe180d3c">&#9670;&nbsp;</a></span>getPeerId()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int64_t History::getPeerId </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classToxPk.html">ToxPk</a> const &amp;&#160;</td>
          <td class="paramname"><em>pk</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a3b82aa28959279e829dcd4efb4a27fa8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b82aa28959279e829dcd4efb4a27fa8">&#9670;&nbsp;</a></span>getUndeliveredMessagesForFriend()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classQList.html">QList</a>&lt; <a class="el" href="structHistory_1_1HistMessage.html">History::HistMessage</a> &gt; History::getUndeliveredMessagesForFriend </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classToxPk.html">ToxPk</a> &amp;&#160;</td>
          <td class="paramname"><em>friendPk</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="history_8cpp_source.html#l01158">1158</a> of file <a class="el" href="history_8cpp_source.html">history.cpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classHistory_a3b82aa28959279e829dcd4efb4a27fa8_cgraph.png" border="0" usemap="#classHistory_a3b82aa28959279e829dcd4efb4a27fa8_cgraph" alt=""/></div>
<map name="classHistory_a3b82aa28959279e829dcd4efb4a27fa8_cgraph" id="classHistory_a3b82aa28959279e829dcd4efb4a27fa8_cgraph">
<area shape="rect" title=" " alt="" coords="5,49,247,90"/>
<area shape="rect" href="classHistory.html#a62105626e8e77040b7f51d98458de193" title="Determines if history access should be blocked." alt="" coords="295,31,512,57"/>
<area shape="rect" href="classContactId.html#ac7917798235c68c6112e9089ca05da27" title="Converts the ContactId to a uppercase hex string." alt="" coords="332,81,475,108"/>
<area shape="rect" href="classSettings.html#a754f11e4d7d7e9e12b5c411b42dae0fb" title="Returns the singleton instance." alt="" coords="560,5,719,32"/>
<area shape="rect" href="classHistory.html#ac09cc6497d03c92ba5e1dc13e67d1730" title="Checks if the database was opened successfully." alt="" coords="580,56,699,83"/>
<area shape="rect" href="classSettings.html#ab7169a6eefce79566dd07db3b1e5e967" title=" " alt="" coords="767,5,903,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classHistory_a3b82aa28959279e829dcd4efb4a27fa8_icgraph.png" border="0" usemap="#classHistory_a3b82aa28959279e829dcd4efb4a27fa8_icgraph" alt=""/></div>
<map name="classHistory_a3b82aa28959279e829dcd4efb4a27fa8_icgraph" id="classHistory_a3b82aa28959279e829dcd4efb4a27fa8_icgraph">
<area shape="rect" title=" " alt="" coords="491,5,732,47"/>
<area shape="rect" href="classChatHistory.html#ae5e2e3220f00ee68a3394388d253e366" title="Sends any unsent messages in history to the underlying message dispatcher." alt="" coords="236,5,443,47"/>
<area shape="rect" href="classChatHistory.html#a4af83d592f2eaee02a8316c3393a8d52" title=" " alt="" coords="5,13,188,39"/>
</map>
</div>

</div>
</div>
<a id="a62105626e8e77040b7f51d98458de193"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a62105626e8e77040b7f51d98458de193">&#9670;&nbsp;</a></span>historyAccessBlocked()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool History::historyAccessBlocked </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Determines if history access should be blocked. </p>
<dl class="section return"><dt>Returns</dt><dd>True if history should not be accessed </dd></dl>

<p class="definition">Definition at line <a class="el" href="history_8cpp_source.html#l01387">1387</a> of file <a class="el" href="history_8cpp_source.html">history.cpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classHistory_a62105626e8e77040b7f51d98458de193_cgraph.png" border="0" usemap="#classHistory_a62105626e8e77040b7f51d98458de193_cgraph" alt=""/></div>
<map name="classHistory_a62105626e8e77040b7f51d98458de193_cgraph" id="classHistory_a62105626e8e77040b7f51d98458de193_cgraph">
<area shape="rect" title="Determines if history access should be blocked." alt="" coords="5,31,223,57"/>
<area shape="rect" href="classSettings.html#a754f11e4d7d7e9e12b5c411b42dae0fb" title="Returns the singleton instance." alt="" coords="271,5,429,32"/>
<area shape="rect" href="classHistory.html#ac09cc6497d03c92ba5e1dc13e67d1730" title="Checks if the database was opened successfully." alt="" coords="291,56,409,83"/>
<area shape="rect" href="classSettings.html#ab7169a6eefce79566dd07db3b1e5e967" title=" " alt="" coords="477,5,613,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classHistory_a62105626e8e77040b7f51d98458de193_icgraph.png" border="0" usemap="#classHistory_a62105626e8e77040b7f51d98458de193_icgraph" alt=""/></div>
<map name="classHistory_a62105626e8e77040b7f51d98458de193_icgraph" id="classHistory_a62105626e8e77040b7f51d98458de193_icgraph">
<area shape="rect" title="Determines if history access should be blocked." alt="" coords="1120,304,1337,331"/>
<area shape="rect" href="classHistory.html#a45e92a551ba16cee4704458c16237a97" title=" " alt="" coords="846,5,1057,32"/>
<area shape="rect" href="classHistory.html#abcce3c0e31955b6bf77b8d96a62e5b29" title="Saves a chat message in the database." alt="" coords="571,668,757,695"/>
<area shape="rect" href="classHistory.html#a211bf5d2ffa4c1657b4c5f37fcebf510" title=" " alt="" coords="833,275,1069,301"/>
<area shape="rect" href="classHistory.html#ad104cfe24475f8a6ee23641d8c8fe8ac" title="Search phrase in chat messages." alt="" coords="853,209,1050,250"/>
<area shape="rect" href="classHistory.html#a51b715e3544228018a5a035652ae56de" title=" " alt="" coords="840,157,1063,184"/>
<area shape="rect" href="classHistory.html#a857a5a2a080760ae86ecf386a1428c6e" title="Checks if a friend has chat history." alt="" coords="584,107,744,133"/>
<area shape="rect" href="classHistory.html#ac44641454765cf9ce2c71ed1e17adccf" title=" " alt="" coords="557,379,771,421"/>
<area shape="rect" href="classHistory.html#a889a688372db3fe48bdb1dc37e8755c2" title=" " alt="" coords="845,326,1058,367"/>
<area shape="rect" href="classHistory.html#a358d34068f7daba96c510e3236a4e004" title="Gets date boundaries in conversation with friendPk. History doesn&#39;t model conversation indexes,..." alt="" coords="845,443,1058,485"/>
<area shape="rect" href="classHistory.html#a3b82aa28959279e829dcd4efb4a27fa8" title=" " alt="" coords="831,509,1072,550"/>
<area shape="rect" href="classHistory.html#a08022c9c5a58ddd0ccc7421042ba1e0a" title="Marks a message as delivered. Removing message from the faux&#45;offline pending messages list." alt="" coords="857,575,1046,601"/>
<area shape="rect" href="classHistory.html#a74104ef2bbc6d9d387f675aadd8b7fa0" title=" " alt="" coords="865,56,1038,83"/>
<area shape="rect" href="classChatHistory.html#a46049bd99919563e0b5dd16fe90f7d74" title=" " alt="" coords="564,31,764,57"/>
<area shape="rect" href="classChatHistory.html#addb5c44ae1d6e70549875bcb6636d69b" title=" " alt="" coords="256,668,496,695"/>
<area shape="rect" href="classChatHistory.html#a8c1fc9d72feb0b27fcf44f8d4fc68036" title=" " alt="" coords="271,567,481,593"/>
<area shape="rect" href="classChatHistory.html#a4af83d592f2eaee02a8316c3393a8d52" title=" " alt="" coords="15,567,197,593"/>
<area shape="rect" href="classChatHistory.html#a3fb366a4aa06e95f9fa72d592076934a" title="Inserts a system message at the end of the chat." alt="" coords="545,275,783,301"/>
<area shape="rect" href="classChatHistory.html#ab3ea46732b21c61aaaaf7147ec2e1d12" title="searches backwards through the chat log until phrase is found according to parameter" alt="" coords="269,275,483,301"/>
<area shape="rect" href="classChatHistory.html#a385c0861dc9410fcf18684d8fe8fc019" title="Unconditionally loads the given index and all future messages that are not in the session chat log in..." alt="" coords="573,158,755,199"/>
<area shape="rect" href="classAboutFriend.html#a0d170f4e26de5f7af1fbfa2eb4f164da" title=" " alt="" coords="261,107,491,133"/>
<area shape="rect" href="classChatHistory.html#a344eb9def397254e0345c21e6bbf7ad4" title="Forces the given index and all future indexes to be in the chatlog." alt="" coords="285,158,467,199"/>
<area shape="rect" href="classChatHistory.html#a47c4d731377614a72939cf9aa6925ca9" title="Returns reference to item at idx." alt="" coords="47,191,165,217"/>
<area shape="rect" href="classChatHistory.html#ab2719a6a9cfa86eaa1907e4ee9d64674" title="searches forwards through the chat log until phrase is found according to parameter" alt="" coords="5,140,207,167"/>
<area shape="rect" href="classChatHistory.html#a5e98010471983b9890f7ef673b1e1bef" title="Gets the initial chat log index for a sessionChatLog with 0 items loaded from history...." alt="" coords="279,379,473,421"/>
<area shape="rect" href="classChatHistory.html#a7281d4a0fe8b2cbb4c7e973cf6550491" title="Gets indexes for each new date starting at startDate." alt="" coords="571,449,757,476"/>
<area shape="rect" href="classChatHistory.html#ae5e2e3220f00ee68a3394388d253e366" title="Sends any unsent messages in history to the underlying message dispatcher." alt="" coords="273,501,479,542"/>
<area shape="rect" href="classChatHistory.html#a190a6ea7cca8337ec5f345a681de4026" title=" " alt="" coords="551,617,777,644"/>
<area shape="rect" href="classChatHistory.html#a750f5d39ddd30b1f2a8c28dc0947d69f" title=" " alt="" coords="553,551,775,593"/>
<area shape="rect" href="classChatHistory.html#adf4f147d415a514283964e09ef4b1231" title=" " alt="" coords="255,617,497,644"/>
</map>
</div>

</div>
</div>
<a id="a857a5a2a080760ae86ecf386a1428c6e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a857a5a2a080760ae86ecf386a1428c6e">&#9670;&nbsp;</a></span>historyExists()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool History::historyExists </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classToxPk.html">ToxPk</a> &amp;&#160;</td>
          <td class="paramname"><em>friendPk</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks if a friend has chat history. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">friendPk</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if has, false otherwise. </dd></dl>

<p class="definition">Definition at line <a class="el" href="history_8cpp_source.html#l00759">759</a> of file <a class="el" href="history_8cpp_source.html">history.cpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classHistory_a857a5a2a080760ae86ecf386a1428c6e_cgraph.png" border="0" usemap="#classHistory_a857a5a2a080760ae86ecf386a1428c6e_cgraph" alt=""/></div>
<map name="classHistory_a857a5a2a080760ae86ecf386a1428c6e_cgraph" id="classHistory_a857a5a2a080760ae86ecf386a1428c6e_cgraph">
<area shape="rect" title="Checks if a friend has chat history." alt="" coords="5,56,165,83"/>
<area shape="rect" href="classHistory.html#a51b715e3544228018a5a035652ae56de" title=" " alt="" coords="213,81,436,108"/>
<area shape="rect" href="classHistory.html#a62105626e8e77040b7f51d98458de193" title="Determines if history access should be blocked." alt="" coords="484,31,701,57"/>
<area shape="rect" href="classContactId.html#ac7917798235c68c6112e9089ca05da27" title="Converts the ContactId to a uppercase hex string." alt="" coords="521,81,664,108"/>
<area shape="rect" href="classSettings.html#a754f11e4d7d7e9e12b5c411b42dae0fb" title="Returns the singleton instance." alt="" coords="749,5,908,32"/>
<area shape="rect" href="classHistory.html#ac09cc6497d03c92ba5e1dc13e67d1730" title="Checks if the database was opened successfully." alt="" coords="769,56,888,83"/>
<area shape="rect" href="classSettings.html#ab7169a6eefce79566dd07db3b1e5e967" title=" " alt="" coords="956,5,1092,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classHistory_a857a5a2a080760ae86ecf386a1428c6e_icgraph.png" border="0" usemap="#classHistory_a857a5a2a080760ae86ecf386a1428c6e_icgraph" alt=""/></div>
<map name="classHistory_a857a5a2a080760ae86ecf386a1428c6e_icgraph" id="classHistory_a857a5a2a080760ae86ecf386a1428c6e_icgraph">
<area shape="rect" title="Checks if a friend has chat history." alt="" coords="283,5,443,32"/>
<area shape="rect" href="classAboutFriend.html#a0d170f4e26de5f7af1fbfa2eb4f164da" title=" " alt="" coords="5,5,235,32"/>
</map>
</div>

</div>
</div>
<a id="ac09cc6497d03c92ba5e1dc13e67d1730"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac09cc6497d03c92ba5e1dc13e67d1730">&#9670;&nbsp;</a></span>isValid()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool History::isValid </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks if the database was opened successfully. </p>
<dl class="section return"><dt>Returns</dt><dd>True if database if opened, false otherwise. </dd></dl>

<p class="definition">Definition at line <a class="el" href="history_8cpp_source.html#l00749">749</a> of file <a class="el" href="history_8cpp_source.html">history.cpp</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classHistory_ac09cc6497d03c92ba5e1dc13e67d1730_icgraph.png" border="0" usemap="#classHistory_ac09cc6497d03c92ba5e1dc13e67d1730_icgraph" alt=""/></div>
<map name="classHistory_ac09cc6497d03c92ba5e1dc13e67d1730_icgraph" id="classHistory_ac09cc6497d03c92ba5e1dc13e67d1730_icgraph">
<area shape="rect" title="Checks if the database was opened successfully." alt="" coords="1384,391,1503,418"/>
<area shape="rect" href="classHistory.html#abe01b50ec9f5f68b8cb887da1874f61c" title="Erases all the chat history from the database." alt="" coords="1148,126,1307,153"/>
<area shape="rect" href="classHistory.html#a1bfb6273a139a659667e2a15407c0304" title="Prepares the database to work with the history." alt="" coords="1166,315,1289,342"/>
<area shape="rect" href="classHistory.html#a62105626e8e77040b7f51d98458de193" title="Determines if history access should be blocked." alt="" coords="1119,417,1336,443"/>
<area shape="rect" href="classHistory.html#af6a540f04cee58bf32f6ac7e3d0dc418" title=" " alt="" coords="867,71,1038,98"/>
<area shape="rect" href="classHistory.html#a4e2f0b6c902c27a5101b618956e39023" title="Erases the chat history with one friend." alt="" coords="1121,602,1334,629"/>
<area shape="rect" href="classHistory.html#a5b00b64a1ddee04e60d5a3b517fd6d4c" title=" " alt="" coords="1160,653,1295,679"/>
<area shape="rect" href="classPrivacyForm.html#a460c853b8107d52c39d8702ebfd652b1" title=" " alt="" coords="839,5,1067,47"/>
<area shape="rect" href="classHistory.html#a45e92a551ba16cee4704458c16237a97" title=" " alt="" coords="847,391,1058,418"/>
<area shape="rect" href="classHistory.html#abcce3c0e31955b6bf77b8d96a62e5b29" title="Saves a chat message in the database." alt="" coords="573,66,759,93"/>
<area shape="rect" href="classHistory.html#a211bf5d2ffa4c1657b4c5f37fcebf510" title=" " alt="" coords="835,493,1071,519"/>
<area shape="rect" href="classHistory.html#ad104cfe24475f8a6ee23641d8c8fe8ac" title="Search phrase in chat messages." alt="" coords="567,595,765,636"/>
<area shape="rect" href="classHistory.html#a51b715e3544228018a5a035652ae56de" title=" " alt="" coords="841,661,1064,687"/>
<area shape="rect" href="classHistory.html#a857a5a2a080760ae86ecf386a1428c6e" title="Checks if a friend has chat history." alt="" coords="586,726,746,753"/>
<area shape="rect" href="classHistory.html#ac44641454765cf9ce2c71ed1e17adccf" title=" " alt="" coords="559,427,773,468"/>
<area shape="rect" href="classHistory.html#a889a688372db3fe48bdb1dc37e8755c2" title=" " alt="" coords="846,544,1059,585"/>
<area shape="rect" href="classHistory.html#a358d34068f7daba96c510e3236a4e004" title="Gets date boundaries in conversation with friendPk. History doesn&#39;t model conversation indexes,..." alt="" coords="846,224,1059,265"/>
<area shape="rect" href="classHistory.html#a3b82aa28959279e829dcd4efb4a27fa8" title=" " alt="" coords="545,183,787,224"/>
<area shape="rect" href="classHistory.html#a08022c9c5a58ddd0ccc7421042ba1e0a" title="Marks a message as delivered. Removing message from the faux&#45;offline pending messages list." alt="" coords="858,290,1047,317"/>
<area shape="rect" href="classHistory.html#a74104ef2bbc6d9d387f675aadd8b7fa0" title=" " alt="" coords="866,341,1039,367"/>
<area shape="rect" href="classChatHistory.html#a46049bd99919563e0b5dd16fe90f7d74" title=" " alt="" coords="566,358,766,385"/>
<area shape="rect" href="classChatHistory.html#addb5c44ae1d6e70549875bcb6636d69b" title=" " alt="" coords="256,69,496,95"/>
<area shape="rect" href="classChatHistory.html#a8c1fc9d72feb0b27fcf44f8d4fc68036" title=" " alt="" coords="271,123,481,150"/>
<area shape="rect" href="classChatHistory.html#a4af83d592f2eaee02a8316c3393a8d52" title=" " alt="" coords="15,153,197,179"/>
<area shape="rect" href="classChatHistory.html#a3fb366a4aa06e95f9fa72d592076934a" title="Inserts a system message at the end of the chat." alt="" coords="547,493,785,519"/>
<area shape="rect" href="classChatHistory.html#ab3ea46732b21c61aaaaf7147ec2e1d12" title="searches backwards through the chat log until phrase is found according to parameter" alt="" coords="269,558,483,585"/>
<area shape="rect" href="classChatHistory.html#a385c0861dc9410fcf18684d8fe8fc019" title="Unconditionally loads the given index and all future messages that are not in the session chat log in..." alt="" coords="575,660,757,701"/>
<area shape="rect" href="classAboutFriend.html#a0d170f4e26de5f7af1fbfa2eb4f164da" title=" " alt="" coords="261,726,491,753"/>
<area shape="rect" href="classChatHistory.html#a344eb9def397254e0345c21e6bbf7ad4" title="Forces the given index and all future indexes to be in the chatlog." alt="" coords="285,660,467,701"/>
<area shape="rect" href="classChatHistory.html#a47c4d731377614a72939cf9aa6925ca9" title="Returns reference to item at idx." alt="" coords="47,693,165,719"/>
<area shape="rect" href="classChatHistory.html#ab2719a6a9cfa86eaa1907e4ee9d64674" title="searches forwards through the chat log until phrase is found according to parameter" alt="" coords="5,642,207,669"/>
<area shape="rect" href="classChatHistory.html#a5e98010471983b9890f7ef673b1e1bef" title="Gets the initial chat log index for a sessionChatLog with 0 items loaded from history...." alt="" coords="279,427,473,468"/>
<area shape="rect" href="classChatHistory.html#a7281d4a0fe8b2cbb4c7e973cf6550491" title="Gets indexes for each new date starting at startDate." alt="" coords="573,249,759,275"/>
<area shape="rect" href="classChatHistory.html#ae5e2e3220f00ee68a3394388d253e366" title="Sends any unsent messages in history to the underlying message dispatcher." alt="" coords="273,175,479,216"/>
<area shape="rect" href="classChatHistory.html#a190a6ea7cca8337ec5f345a681de4026" title=" " alt="" coords="553,299,779,326"/>
<area shape="rect" href="classChatHistory.html#a750f5d39ddd30b1f2a8c28dc0947d69f" title=" " alt="" coords="555,117,777,159"/>
<area shape="rect" href="classChatHistory.html#adf4f147d415a514283964e09ef4b1231" title=" " alt="" coords="255,269,497,295"/>
<area shape="rect" href="classChatHistory.html#a94791b3d1407d966e4a649838e07bc36" title=" " alt="" coords="565,15,767,42"/>
<area shape="rect" href="classChatHistory.html#aa875c1b421ec3d24781b4ae95abfd159" title=" " alt="" coords="263,17,489,43"/>
<area shape="rect" href="classAboutFriend.html#a9dc8e083c5560992abc24a5ae94c6599" title=" " alt="" coords="859,762,1046,789"/>
<area shape="rect" href="classWidget.html#afeb18b9fa9a2822cbe3c36a73f1a1baf" title=" " alt="" coords="869,813,1036,839"/>
</map>
</div>

</div>
</div>
<a id="af6a540f04cee58bf32f6ac7e3d0dc418"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6a540f04cee58bf32f6ac7e3d0dc418">&#9670;&nbsp;</a></span>markAsBroken()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void History::markAsBroken </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="rawdatabase_8h.html#abbeb84b4f2e88670ea185408462d094c">RowId</a>&#160;</td>
          <td class="paramname"><em>messageId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="brokenmessagereason_8h.html#a5aeb89765ee85523ed7aba8a393f0082">BrokenMessageReason</a>&#160;</td>
          <td class="paramname"><em>reason</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="history_8cpp_source.html#l01402">1402</a> of file <a class="el" href="history_8cpp_source.html">history.cpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classHistory_af6a540f04cee58bf32f6ac7e3d0dc418_cgraph.png" border="0" usemap="#classHistory_af6a540f04cee58bf32f6ac7e3d0dc418_cgraph" alt=""/></div>
<map name="classHistory_af6a540f04cee58bf32f6ac7e3d0dc418_cgraph" id="classHistory_af6a540f04cee58bf32f6ac7e3d0dc418_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,176,32"/>
<area shape="rect" href="classHistory.html#ac09cc6497d03c92ba5e1dc13e67d1730" title="Checks if the database was opened successfully." alt="" coords="224,5,343,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classHistory_af6a540f04cee58bf32f6ac7e3d0dc418_icgraph.png" border="0" usemap="#classHistory_af6a540f04cee58bf32f6ac7e3d0dc418_icgraph" alt=""/></div>
<map name="classHistory_af6a540f04cee58bf32f6ac7e3d0dc418_icgraph" id="classHistory_af6a540f04cee58bf32f6ac7e3d0dc418_icgraph">
<area shape="rect" title=" " alt="" coords="780,35,951,61"/>
<area shape="rect" href="classChatHistory.html#a94791b3d1407d966e4a649838e07bc36" title=" " alt="" coords="520,5,721,32"/>
<area shape="rect" href="classChatHistory.html#a750f5d39ddd30b1f2a8c28dc0947d69f" title=" " alt="" coords="509,57,732,98"/>
<area shape="rect" href="classChatHistory.html#aa875c1b421ec3d24781b4ae95abfd159" title=" " alt="" coords="236,5,461,32"/>
<area shape="rect" href="classChatHistory.html#a4af83d592f2eaee02a8316c3393a8d52" title=" " alt="" coords="5,64,188,91"/>
<area shape="rect" href="classChatHistory.html#ae5e2e3220f00ee68a3394388d253e366" title="Sends any unsent messages in history to the underlying message dispatcher." alt="" coords="245,57,452,98"/>
<area shape="rect" href="classChatHistory.html#a8c1fc9d72feb0b27fcf44f8d4fc68036" title=" " alt="" coords="244,123,453,149"/>
</map>
</div>

</div>
</div>
<a id="a08022c9c5a58ddd0ccc7421042ba1e0a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a08022c9c5a58ddd0ccc7421042ba1e0a">&#9670;&nbsp;</a></span>markAsDelivered()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void History::markAsDelivered </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="rawdatabase_8h.html#abbeb84b4f2e88670ea185408462d094c">RowId</a>&#160;</td>
          <td class="paramname"><em>messageId</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Marks a message as delivered. Removing message from the faux-offline pending messages list. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td><a class="el" href="structMessage.html">Message</a> ID. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="history_8cpp_source.html#l01374">1374</a> of file <a class="el" href="history_8cpp_source.html">history.cpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classHistory_a08022c9c5a58ddd0ccc7421042ba1e0a_cgraph.png" border="0" usemap="#classHistory_a08022c9c5a58ddd0ccc7421042ba1e0a_cgraph" alt=""/></div>
<map name="classHistory_a08022c9c5a58ddd0ccc7421042ba1e0a_cgraph" id="classHistory_a08022c9c5a58ddd0ccc7421042ba1e0a_cgraph">
<area shape="rect" title="Marks a message as delivered. Removing message from the faux&#45;offline pending messages list." alt="" coords="5,31,195,57"/>
<area shape="rect" href="classHistory.html#a62105626e8e77040b7f51d98458de193" title="Determines if history access should be blocked." alt="" coords="243,31,460,57"/>
<area shape="rect" href="classSettings.html#a754f11e4d7d7e9e12b5c411b42dae0fb" title="Returns the singleton instance." alt="" coords="508,5,667,32"/>
<area shape="rect" href="classHistory.html#ac09cc6497d03c92ba5e1dc13e67d1730" title="Checks if the database was opened successfully." alt="" coords="528,56,647,83"/>
<area shape="rect" href="classSettings.html#ab7169a6eefce79566dd07db3b1e5e967" title=" " alt="" coords="715,5,851,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classHistory_a08022c9c5a58ddd0ccc7421042ba1e0a_icgraph.png" border="0" usemap="#classHistory_a08022c9c5a58ddd0ccc7421042ba1e0a_icgraph" alt=""/></div>
<map name="classHistory_a08022c9c5a58ddd0ccc7421042ba1e0a_icgraph" id="classHistory_a08022c9c5a58ddd0ccc7421042ba1e0a_icgraph">
<area shape="rect" title="Marks a message as delivered. Removing message from the faux&#45;offline pending messages list." alt="" coords="800,35,989,61"/>
<area shape="rect" href="classChatHistory.html#a190a6ea7cca8337ec5f345a681de4026" title=" " alt="" coords="527,5,752,32"/>
<area shape="rect" href="classChatHistory.html#a750f5d39ddd30b1f2a8c28dc0947d69f" title=" " alt="" coords="528,57,751,98"/>
<area shape="rect" href="classChatHistory.html#adf4f147d415a514283964e09ef4b1231" title=" " alt="" coords="236,5,479,32"/>
<area shape="rect" href="classChatHistory.html#a4af83d592f2eaee02a8316c3393a8d52" title=" " alt="" coords="5,64,188,91"/>
<area shape="rect" href="classChatHistory.html#ae5e2e3220f00ee68a3394388d253e366" title="Sends any unsent messages in history to the underlying message dispatcher." alt="" coords="254,57,461,98"/>
<area shape="rect" href="classChatHistory.html#a8c1fc9d72feb0b27fcf44f8d4fc68036" title=" " alt="" coords="253,123,462,149"/>
</map>
</div>

</div>
</div>
<a id="ac8ffc72bd15c4e3e1068a805a2d4e556"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8ffc72bd15c4e3e1068a805a2d4e556">&#9670;&nbsp;</a></span>onFileInserted</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void History::onFileInserted </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="rawdatabase_8h.html#abbeb84b4f2e88670ea185408462d094c">RowId</a>&#160;</td>
          <td class="paramname"><em>dbId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">QString&#160;</td>
          <td class="paramname"><em>fileId</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span><span class="mlabel">slot</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="history_8cpp_source.html#l00833">833</a> of file <a class="el" href="history_8cpp_source.html">history.cpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classHistory_ac8ffc72bd15c4e3e1068a805a2d4e556_cgraph.png" border="0" usemap="#classHistory_ac8ffc72bd15c4e3e1068a805a2d4e556_cgraph" alt=""/></div>
<map name="classHistory_ac8ffc72bd15c4e3e1068a805a2d4e556_cgraph" id="classHistory_ac8ffc72bd15c4e3e1068a805a2d4e556_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,173,32"/>
<area shape="rect" href="classHistory.html#a94fcde3743ad2f5690bc65d9694486b3" title=" " alt="" coords="221,5,432,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classHistory_ac8ffc72bd15c4e3e1068a805a2d4e556_icgraph.png" border="0" usemap="#classHistory_ac8ffc72bd15c4e3e1068a805a2d4e556_icgraph" alt=""/></div>
<map name="classHistory_ac8ffc72bd15c4e3e1068a805a2d4e556_icgraph" id="classHistory_ac8ffc72bd15c4e3e1068a805a2d4e556_icgraph">
<area shape="rect" title=" " alt="" coords="176,5,344,32"/>
<area shape="rect" href="classHistory.html#a1bfb6273a139a659667e2a15407c0304" title="Prepares the database to work with the history." alt="" coords="5,5,128,32"/>
</map>
</div>

</div>
</div>
<a id="a4e2f0b6c902c27a5101b618956e39023"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e2f0b6c902c27a5101b618956e39023">&#9670;&nbsp;</a></span>removeFriendHistory()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void History::removeFriendHistory </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classToxPk.html">ToxPk</a> &amp;&#160;</td>
          <td class="paramname"><em>friendPk</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Erases the chat history with one friend. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">friendPk</td><td><a class="el" href="classFriend.html">Friend</a> public key to erase. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="history_8cpp_source.html#l00792">792</a> of file <a class="el" href="history_8cpp_source.html">history.cpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classHistory_a4e2f0b6c902c27a5101b618956e39023_cgraph.png" border="0" usemap="#classHistory_a4e2f0b6c902c27a5101b618956e39023_cgraph" alt=""/></div>
<map name="classHistory_a4e2f0b6c902c27a5101b618956e39023_cgraph" id="classHistory_a4e2f0b6c902c27a5101b618956e39023_cgraph">
<area shape="rect" title="Erases the chat history with one friend." alt="" coords="5,5,219,32"/>
<area shape="rect" href="classHistory.html#ac09cc6497d03c92ba5e1dc13e67d1730" title="Checks if the database was opened successfully." alt="" coords="267,5,385,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classHistory_a4e2f0b6c902c27a5101b618956e39023_icgraph.png" border="0" usemap="#classHistory_a4e2f0b6c902c27a5101b618956e39023_icgraph" alt=""/></div>
<map name="classHistory_a4e2f0b6c902c27a5101b618956e39023_icgraph" id="classHistory_a4e2f0b6c902c27a5101b618956e39023_icgraph">
<area shape="rect" title="Erases the chat history with one friend." alt="" coords="240,31,453,57"/>
<area shape="rect" href="classAboutFriend.html#a9dc8e083c5560992abc24a5ae94c6599" title=" " alt="" coords="5,5,192,32"/>
<area shape="rect" href="classWidget.html#afeb18b9fa9a2822cbe3c36a73f1a1baf" title=" " alt="" coords="15,56,182,83"/>
</map>
</div>

</div>
</div>
<a id="a74104ef2bbc6d9d387f675aadd8b7fa0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a74104ef2bbc6d9d387f675aadd8b7fa0">&#9670;&nbsp;</a></span>setFileFinished()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void History::setFileFinished </td>
          <td>(</td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>fileId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>success</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>filePath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QByteArray &amp;&#160;</td>
          <td class="paramname"><em>fileHash</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="history_8cpp_source.html#l00989">989</a> of file <a class="el" href="history_8cpp_source.html">history.cpp</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classHistory_a74104ef2bbc6d9d387f675aadd8b7fa0_cgraph.png" border="0" usemap="#classHistory_a74104ef2bbc6d9d387f675aadd8b7fa0_cgraph" alt=""/></div>
<map name="classHistory_a74104ef2bbc6d9d387f675aadd8b7fa0_cgraph" id="classHistory_a74104ef2bbc6d9d387f675aadd8b7fa0_cgraph">
<area shape="rect" title=" " alt="" coords="5,31,179,57"/>
<area shape="rect" href="classHistory.html#a94fcde3743ad2f5690bc65d9694486b3" title=" " alt="" coords="230,5,441,32"/>
<area shape="rect" href="classHistory.html#a62105626e8e77040b7f51d98458de193" title="Determines if history access should be blocked." alt="" coords="227,56,444,83"/>
<area shape="rect" href="classSettings.html#a754f11e4d7d7e9e12b5c411b42dae0fb" title="Returns the singleton instance." alt="" coords="492,31,651,57"/>
<area shape="rect" href="classHistory.html#ac09cc6497d03c92ba5e1dc13e67d1730" title="Checks if the database was opened successfully." alt="" coords="512,81,631,108"/>
<area shape="rect" href="classSettings.html#ab7169a6eefce79566dd07db3b1e5e967" title=" " alt="" coords="699,31,835,57"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classHistory_a74104ef2bbc6d9d387f675aadd8b7fa0_icgraph.png" border="0" usemap="#classHistory_a74104ef2bbc6d9d387f675aadd8b7fa0_icgraph" alt=""/></div>
<map name="classHistory_a74104ef2bbc6d9d387f675aadd8b7fa0_icgraph" id="classHistory_a74104ef2bbc6d9d387f675aadd8b7fa0_icgraph">
<area shape="rect" title=" " alt="" coords="253,5,427,32"/>
<area shape="rect" href="classChatHistory.html#a46049bd99919563e0b5dd16fe90f7d74" title=" " alt="" coords="5,5,205,32"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a2f7d73854bcdfa71ec36f8e687166b72"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f7d73854bcdfa71ec36f8e687166b72">&#9670;&nbsp;</a></span>db</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt;<a class="el" href="classRawDatabase.html">RawDatabase</a>&gt; History::db</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="history_8h_source.html#l00237">237</a> of file <a class="el" href="history_8h_source.html">history.h</a>.</p>

</div>
</div>
<a id="abcc4feaecbb4401c4fe7bbba72ac6bb0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abcc4feaecbb4401c4fe7bbba72ac6bb0">&#9670;&nbsp;</a></span>fileInfos</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classQHash.html">QHash</a>&lt;QString, <a class="el" href="structHistory_1_1FileInfo.html">FileInfo</a>&gt; History::fileInfos</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="history_8h_source.html#l00250">250</a> of file <a class="el" href="history_8h_source.html">history.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/persistence/<a class="el" href="history_8h_source.html">history.h</a></li>
<li>src/persistence/<a class="el" href="history_8cpp_source.html">history.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
